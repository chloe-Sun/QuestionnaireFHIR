<html>
    <head>
        <link rel="stylesheet" href="./css/style.css"/>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <div class = "app">
            <div class = "header">
                    <h1>Kessler Psychological Distress Scale Answer(K10)</h1>
                </div>
            <div class = "questionnaire">
                <h2><i>K10 Patient Answers:</i></h2>
                <div class = "question">
                    <p>Q1: Feeling tired out for no good reasons?</p>
                    <p id=Q1 class = "answer">{{K10_q1}}</p>
                </div>

                <div class = "question">
                    <p>Q2: Feeling nervous?</p>
                    <p id=Q2 class = "answer">{{K10_q2}}</p>
                </div>

                <div class = "question">
                    <p>Q3: Feeling so nervous that nothing could calm you down?</p>
                    <p id=Q3 class = "answer">{{K10_q3}}</p>
                </div>

                <div class = "question">
                    <p>Q4: Feeling hopeless?</p>
                    <p id=Q4 class = "answer">{{K10_q4}}</p>
                </div>

                <div class = "question">
                    <p>Q5: Feeling restless or fidgety?</p>
                    <p id=Q5 class = "answer">{{K10_q5}}</p>
                </div>

                <div class = "question">
                    <p>Q6: Feeling so restless you could not sit still?</p>
                    <p id=Q6 class = "answer">{{K10_q6}}</p>
                </div>

                <div class = "question">
                    <p>Q7: Feeling depressed?</p>
                    <p id=Q7 class = "answer">{{k5_q7}}</p>
                </div>

                <div class = "question">
                    <p>Q8: Feeling everything was an effort</p>
                    <p id=Q8 class = "answer">{{k10_q8}}</p>
                </div>

                <div class = "question">
                    <p>Q9: Feeling so sad that nothing could cheer you up?</p>
                    <p id=Q9 class = "answer">{{k10_q9}}</p>
                </div>

                <div class = "question">
                    <p>Q10: Feeling worthless?</p>
                    <p id=Q10 class = "answer">{{k10_q10}}</p>
                </div>

                <div class = "grade">
                    <p id=score>Grade:</p>
                    <!-- <input type = "number"> -->
                    <br>
                    <p id=result></p>
                </div>

            </div>
            <div class = "bottom">
              <a href = "index.html"><span>Home</span></a>
              <a href = "patient.html"><span>Patient</span></a>
              <a href = "profile.html"><span>Profile</span></a>
              <a href = "about.html"><span>About</span></a>
          </div>
        </div>
    </body>
    <script>
        var answers = JSON.parse(localStorage.getItem("k10-answer"));
        var grade = 0;
        for (i = 0; i < answers.length; i++) {
            var id = "Q" + (i+1);
            document.getElementById(id).innerText = answers[i].answer[0].valueCoding.display;
            var answerCode = answers[i].answer[0].valueCoding.code;
            if (answerCode == "LA6297-1") {
                    grade += 1;
                } else if (answerCode == "LA14732-4") {
                    grade += 2;
                } else if (answerCode == "LA14733-2") {
                    grade += 3;
                } else if (answerCode == "LA14734-0") {
                    grade += 4;
                } else if (answerCode == "LA6154-4") {
                    grade += 5;
                }
        }
        document.getElementById("score").innerText = "Grade: " + grade;
        if (10 <= grade && grade <= 15) {
            document.getElementById("result").innerText = "Low level of psychological distress";
        } else if (16 <= grade && grade <= 21) {
            document.getElementById("result").innerText = "Moderate level of psychological distress";
        } else if (22 <= grade && grade <= 29) {
            document.getElementById("result").innerText = "High level of psychological distress";
        } else if (30 <= grade && grade <= 50) {
            document.getElementById("result").innerText = "Very high level of psychological distress";
        }
    </script>
</html>