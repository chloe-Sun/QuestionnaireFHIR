<html>
    <head>
        <link rel="stylesheet" href="./css/style.css"/>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <div class = "app">
            <div class = "header">
                    <h1>Patient Health Questionnaire (PHQ-9)</h1>
                </div>
            <div class = "questionnaire">
                <h2><i>Over the last two weeks, how often have you been bothered by any of the following problems?</i></h2>
                <div class = "question">
                    <p>Q1: Little interest or pleasure in doing things?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox1" id="cbox1" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox1" id="cbox1" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox1" id="cbox1" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox1" id="cbox1" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q2: Feeling down, depressed, or hopeless?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox2" id="cbox2" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox2" id="cbox2" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox2" id="cbox2" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox2" id="cbox2" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q3: Trouble falling or staying asleep, or sleeping too much?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox3" id="cbox3" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox3" id="cbox3" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox3" id="cbox3" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox3" id="cbox3" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q4: Feeling tired or having little energy?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox4" id="cbox4" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox4" id="cbox4" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox4" id="cbox4" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox4" id="cbox4" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q5: Poor appetite or overeating?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox5" id="cbox5" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox5" id="cbox5" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox5" id="cbox5" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox5" id="cbox5" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q6: Feeling bad about yourself - or that you are a failure or have let yourself or your family down?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox6" id="cbox6" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox6" id="cbox6" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox6" id="cbox6" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox6" id="cbox6" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q7: Trouble concentrating on things, such as reading the newspaper or watching television?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox7" id="cbox7" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox7" id="cbox7" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox7" id="cbox7" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox7" id="cbox7" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q8: Moving or speaking so slowly that other people could have noticed?
Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox8" id="cbox8" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox8" id="cbox8" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox8" id="cbox8" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox8" id="cbox8" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <div class = "question">
                    <p>Q9: Thoughts that you would be better off dead, or of hurting yourself in some way?</p>
                    <div class = "select_area">
                        <input type="radio" name = "cbox9" id="cbox9" value="not_at_all">
                        <label for="cbox1">Not at all</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox9" id="cbox9" value="several_days">
                        <label for="cbox1">Several Days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox9" id="cbox9" value="more_than_half">
                        <label for="cbox1">More tha half the days</label>
                    </div>
                    <div class = "select_area">
                        <input type="radio" name = "cbox9" id="cbox9" value="nearly_every_day">
                        <label for="cbox1">Nearly Every day</label>
                    </div>
                </div>

                <button id="submit" class = "question_button">Submit</button>

            </div>
            <div class = "bottom">
                <a href = "menu.html"><span>Home</span></a>
                <span>Patient</span>
                <a href = "profile.html" style="color:#FFF;"><span>Profile</span></a>
                <a href = "about.html"><span>About</span></a>
            </div>
        </div>
    </body>
    <script>
      document.getElementById("submit").addEventListener("click", function() {
        const client = JSON.parse(localStorage.getItem("client"));
        var answers = [];
        for (i = 0; i < 9; i++) {
          const name = "cbox" + (i+1);
          var choices = document.getElementsByName(name);
          for (j = 0; j < 4; i++) {
            if (choices[j].checked) {
              answers.push(choies[j].value);
            }
          }
        };
        console.log(answers);
      })
      const client = JSON.parse(localStorage.getItem("client"));
        
        const phq_9 = {
          "resourceType" : "QuestionnaireResponse",
          "id" : "questionnaireresponse-phq9-" + client.patient.id,
          "meta" : {
            "profile" : [
              "http://fhir.org/guides/argonaut/questionnaire/StructureDefinition/argo-questionnaireresponse"
            ]
          },
          "text" : {
            "status" : "generated",
            "div" : "<div xmlns=\"http://www.w3.org/1999/xhtml\">\n    <h3>Response Summary</h3>\n    <strong>Questionnaire URL:</strong> http://fhir.org/guides/argonaut/questionnaire/Questionnaire/questionnaire-example-phq9<br />\n    <strong>Date Completed:</strong> 2019-02-13T00:36:41.051113Z<br />\n    <hr /> <br /><strong>Over the last 2 weeks, how often have you been bothered by any of the following problems? (Use “X” to indicate your answer)</strong><br /><br /> <strong>Question:</strong> (linkID=g1.q1) Little interest or pleasure in doing things,<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q2) Feeling down, depressed, or hopeless,<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q3) Trouble falling or staying asleep, or sleeping too much<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q4) Feeling tired or having little energy,<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q5) Poor appetite or overeating,<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q6) Feeling bad about yourself - or that you are a failure or have let yourself or your family down,<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q7) Trouble concentrating on things, such as reading the newspaper or watching television,<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q8) Moving or speaking so slowly that other people could have noticed. Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual,<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /> <strong>Question:</strong> (linkID=g1.q9) Thoughts that you would be better off dead, or of hurting yourself<br /><strong>Response:</strong>  Not at all ( code = LA6568-5, codesystem = http://loinc.org)<br /><br /><strong>Scoring: \nAdd up all checked boxes on PHQ-9. \n\nFor every:\nNot at all = 0;\nSeveral days = 1;\nMore than half the days = 2;\nNearly every day = 3\n\nInterpretation of Total Score\nTotal Score Depression Severity\n1-4 Minimal depression\n5-9 Mild depression\n10-14 Moderate depression\n15-19 Moderately severe depression\n20-27 Severe depression (this is hidden text/should not be displayed to the user)</strong><br /><br /> <strong>Question:</strong> (linkID=g2.q1) If you checked off any problems, how difficult have these problems made it for you to do your work, take care of things at home, or get along with other people,<br /><strong>Response:</strong>  Not difficult at all ( code = LA6572-7, codesystem = http://loinc.org)<br /> <br /><br />\n    </div>"
          },
          "extension" : [
            {
              "url" : "http://fhir.org/guides/argonaut/questionnaire/StructureDefinition/extension-responsePeriod",
              "valuePeriod" : {
                "start" : "2019-02-13T00:36:07.985403Z",
                "end" : "2019-02-13T00:36:41.051113Z"
              }
            }
          ],
          "identifier" : {
            "value" : "questionnaireresponse-example-phq9"
          },
          "questionnaire" : {
            "reference" : "http://fhir.org/guides/argonaut/questionnaire/Questionnaire/questionnaire-example-phq9"
          },
          "status" : "completed",
          "subject" : {
            "reference" : "Patient/" + client.patient.id
          },
          "context" : {
            "reference" : "Encounter/encounter1"
          },
          "authored" : "2019-02-13T00:36:41.051113Z",
          "author" : {
            "reference" : "Practitioner/" + client.user.id
          },
          "source" : {
            "reference" : "Patient/" + client.patient.id
          },
          "item" : [
            {
              "linkId" : "g1",
              "item" : [
                {
                  "linkId" : "g1.d",
                  "text" : "Over the last 2 weeks, how often have you been bothered by any of the following problems? (Use “X” to indicate your answer)"
                },
                {
                  "linkId" : "g1.q1",
                  "text" : "Little interest or pleasure in doing things,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q2",
                  "text" : "Feeling down, depressed, or hopeless,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q3",
                  "text" : "Trouble falling or staying asleep, or sleeping too much",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q4",
                  "text" : "Feeling tired or having little energy,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q5",
                  "text" : "Poor appetite or overeating,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q6",
                  "text" : "Feeling bad about yourself - or that you are a failure or have let yourself or your family down,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q7",
                  "text" : "Trouble concentrating on things, such as reading the newspaper or watching television,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q8",
                  "text" : "Moving or speaking so slowly that other people could have noticed. Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.q9",
                  "text" : "Thoughts that you would be better off dead, or of hurting yourself",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6568-5",
                        "display" : "Not at all"
                      }
                    }
                  ]
                },
                {
                  "linkId" : "g1.s",
                  "text" : "Scoring: \nAdd up all checked boxes on PHQ-9. \n\nFor every:\nNot at all = 0;\nSeveral days = 1;\nMore than half the days = 2;\nNearly every day = 3\n\nInterpretation of Total Score\nTotal Score Depression Severity\n1-4 Minimal depression\n5-9 Mild depression\n10-14 Moderate depression\n15-19 Moderately severe depression\n20-27 Severe depression"
                }
              ]
            },
            {
              "linkId" : "g2",
              "item" : [
                {
                  "linkId" : "g2.q1",
                  "text" : "If you checked off any problems, how difficult have these problems made it for you to do your work, take care of things at home, or get along with other people,",
                  "answer" : [
                    {
                      "valueCoding" : {
                        "system" : "http://loinc.org",
                        "code" : "LA6572-7",
                        "display" : "Not difficult at all"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }

        
    </script>
</html>